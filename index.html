<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Карточки товаров</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            touch-action: pan-y;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        body {
            background-color: #121212;
            font-family: Arial, sans-serif;
            touch-action: pan-y;
            -webkit-user-scalable: no;
            user-scalable: no;
            min-height: 100vh;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Запрет на выделение и контекстное меню */
        body {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        img {
            pointer-events: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }
        
        /* Контейнер для всего контента */
        .page-container {
            width: 100%;
            margin: 0;
            padding: 0px;
        }
        
        /* Кнопки */
        .buttons-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 13px;
            padding: 0;
            width: 100%;
        }
        
        /* Кнопка с иконкой звезды и текстом */
        .star-button {
            background-color: #222224;
            border: none;
            border-radius: 50px;
            padding: 5px 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            height: 34px;
        }
        
        .star-button img {
            width: 16px;
            height: 16px;
        }
        
        .star-number {
            letter-spacing: 0.5px;
        }
        
        /* Правая группа кнопок */
        .right-buttons {
            display: flex;
            gap: 6px;
        }
        
        /* Кнопка BUY TON - ИЗМЕНЕНА */
        .buy-ton-button {
            background-color: rgba(0, 122, 255, 0.2);
            border: none;
            border-radius: 50px;
            padding: 5px 8px 5px 8px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            height: 34px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            width: auto;
        }
        
        .buy-ton-left-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }
        
        .buy-ton-left-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .buy-ton-right-icon {
            width: 20px;
            height: 30px;
            flex-shrink: 0;
        }
        
        .buy-ton-right-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* Верхнее изображение */
        .header-image {
            width: 100%;
            height: 100%;
            border-radius: 19px;
            overflow: hidden;
            margin-bottom: 13px;
            cursor: pointer;
        }
        
        .header-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Основной фильтр категорий */
        .slider-container {
            position: relative;
            width: 100%;
            height: 38px;
            background-color: #222225;
            border-radius: 19px;
            margin: 0 0 13px 0;
            overflow: hidden;
        }
        
        .slider-line {
            display: flex;
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 19px;
        }
        
        .slider-option {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 430;
            font-size: 16px;
            color: #888;
            cursor: pointer;
            transition: color 0.3s ease;
            z-index: 2;
            position: relative;
        }
        
        .slider-option.active {
            color: #fff;
        }
        
        .slider-indicator {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 50%;
            background-color: #303033;
            border-radius: 19px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            pointer-events: none;
        }
        
        /* Новый фильтр Collections */
        .collections-filter {
            display: flex;
            gap: 8px;
            margin-bottom: 13px;
            width: 100%;
        }
        
        .filter-item {
            background-color: #242426;
            border-radius: 19px;
            padding: 10px 12px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 56px;
            transition: background-color 0.3s ease;
            position: relative;
        }
        
        .filter-item.wide {
            flex: 1;
        }
        
        .filter-item.square {
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .filter-item.square.active {
            background-color: #303033;
        }
        
        .filter-text-top {
            color: #888;
            font-size: 15px;
            font-weight: 430;
            line-height: 1.2;
            margin-bottom: 1px;
        }
        
        .filter-text-bottom {
            color: white;
            font-size: 15px;
            font-weight: 500;
            line-height: 1.2;
        }
        
        .filter-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .filter-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* Иконка стрелки в фильтрах */
        .filter-arrow {
            position: absolute;
            right: 9px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            opacity: 0.5;
        }
        
        .filter-arrow img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* Контейнер для карточек */
        .cards-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            padding: 0;
            width: 100%;
            margin-bottom: 86px;
        }
        
        /* Карточки товаров */
        .card {
            position: relative;
            width: 100%;
            height: auto;
            overflow: hidden;
            background-color: #222224;
            border-radius: 25px;
            padding: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            display: none; /* По умолчанию скрываем все карточки */
        }
        
        .card.active {
            display: flex; /* Показываем только активные карточки */
        }
        
        .card-image-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-radius: 21px;
        }
        
        .card-image-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 21px;
            display: flex;
        }
        
        .card-image-slider {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease;
        }
        
        .card-image-slide {
            flex: 0 0 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .card-image-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
            pointer-events: none;
        }
        
        .card-content {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            margin-top: 6px;
        }
        
        .card-title {
            color: white;
            font-size: 16px;
            font-weight: bold;
            margin: 3px 0;
            line-height: 1.3;
            text-align: left;
            width: 100%;
            padding: 0 4px;
        }
        
        .card-buttons {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            margin-top: 6px;
            padding: 0;
            gap: 4px;
        }
        
        .price-button {
            background-color: #0095FF;
            border: none;
            border-radius: 16px;
            padding: 5px 12px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            height: 33px;
            min-width: 0;
        }
        
        .cart-button {
            border: none;
            border-radius: 50%;
            width: 33px;
            height: 33px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            background-color: #343435;
            transition: none;
        }

        .cart-button.in-cart {
            background-color: rgba(76, 175, 80, 0.15);
        }
        
        .cart-icon {
            width: 18px;
            height: 18px;
            opacity: 0.9;
            object-fit: contain;
            transition: none;
        }

        .cart-added-icon {
            width: 18px;
            height: 18px;
            opacity: 0.9;
            object-fit: contain;
            transition: none;
            filter: brightness(0) saturate(100%) invert(56%) sepia(98%) saturate(357%) hue-rotate(81deg) brightness(95%) contrast(89%);
        }

        /* Индикатор слайдов для карточек с двумя изображениями - УБРАН */
        .card-slide-indicator {
            display: none;
        }

        /* Модальное окно оплаты - ИЗМЕНЕНА АНИМАЦИЯ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            backdrop-filter: blur(0px);
            -webkit-backdrop-filter: blur(0px);
            display: flex;
            justify-content: center;
            align-items: flex-end;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .modal-content {
            background-color: #151517;
            width: 100%;
            max-height: 65vh;
            border-top-left-radius: 26px;
            border-top-right-radius: 26px;
            padding: 0;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .modal-content.no-scroll {
            overflow-y: hidden;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }
        
        .modal-header {
            padding: 20px 16px 0 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .checkout-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 26px;
            padding: 10px 16px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-controls {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 26px;
            padding: 8px 12px;
            display: flex;
            gap: 12px;
            align-items: center;
            height: 36px;
        }
        
        .modal-control {
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-icon, .info-icon {
            width: 20px;
            height: 20px;
            filter: invert(1);
        }
        
        .modal-body {
            padding: 16px 16px 25px 16px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        /* Стили для модального окна выбора коллекций и сортировки */
        .selection-card {
            background-color: #222224;
            border-radius: 28px;
            padding: 0;
            width: 100%;
            max-height: 170px;
            overflow-y: auto;
        }

        .selection-card::-webkit-scrollbar {
            width: 6px;
        }

        .selection-card::-webkit-scrollbar-track {
            background: #1a1a1c;
            border-radius: 3px;
        }

        .selection-card::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 3px;
        }

        .selection-item {
            display: flex;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid #2a2a2c;
            cursor: pointer;
        }

        .selection-item:last-child {
            border-bottom: none;
        }

        .selection-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #444;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .selection-icon.selected {
            background-color: #007AFF;
            border-color: #007AFF;
        }

        .selection-icon.selected::after {
            content: '';
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
        }

        .selection-text {
            color: white;
            font-size: 16px;
            font-weight: 430;
            flex: 1;
        }

        /* Стили для модального окна оплаты */
        .payment-methods-card {
            background-color: #222224;
            border-radius: 30px;
            padding: 16px;
            width: 100%;
        }

        .payment-methods-slider-container {
            position: relative;
            width: 100%;
            height: 38px;
            background-color: #1a1a1c;
            border-radius: 23px;
            margin: 0 0 16px 0;
            overflow: hidden;
        }

        .payment-methods-slider-line {
            display: flex;
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 23px;
        }

        .payment-methods-slider-option {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 430;
            font-size: 16px;
            color: #888;
            cursor: pointer;
            transition: color 0.4s ease;
            z-index: 2;
            position: relative;
        }

        .payment-methods-slider-option.active {
            color: #fff;
        }

        .payment-methods-slider-indicator {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 33.33%;
            background-color: #303033;
            border-radius: 23px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            pointer-events: none;
        }

        .payment-cards-container {
            display: flex;
            flex-direction: column;
            gap: 13px;
        }

        .payment-card {
            background-color: #303032;
            border-radius: 25px;
            padding: 12px;
            display: flex;
            align-items: center;
            height: 74px;
        }

        .payment-card-image {
            width: 52px;
            height: 52px;
            border-radius: 18px;
            overflow: hidden;
            flex-shrink: 0;
            background-color: #333;
            margin: 0 12px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .payment-card-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 17px;
            pointer-events: none;
        }

        .payment-card-content {
            flex: 1;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0;
        }

        .payment-card-text {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            height: 100%;
            flex: 1;
        }

        .payment-card-title {
            color: white;
            font-size: 15px;
            font-weight: bold;
            margin: 0;
            line-height: 1.2;
        }

        .payment-card-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            margin: 4px 0 0 0;
            line-height: 1.2;
        }

        /* ИЗМЕНЕНО: Увеличено расстояние от правого края карточки до кнопки на 6px */
        .payment-card-button {
            background-color: #007AFF;
            border: none;
            border-radius: 20px;
            padding: 6px 18px 6px 16px; /* Изменено: 12px справа вместо 6px */
            color: white;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            height: 33px;
            margin-right: 6px; /* Добавлено: дополнительный отступ 6px справа */
        }

        .payment-card-button:active {
            background-color: #0056CC;
        }

        /* Стили для карточки Fill in Data */
        .transfer-data-card {
            background-color: #222224;
            border-radius: 30px;
            width: 100%;
            position: relative;
            height: 205px;
            overflow: hidden;
            padding: 0;
            border: none;
        }

        .transfer-data-card.cart-modal {
            height: 273px;
        }

        .transfer-data-header {
            position: absolute;
            top: 16px;
            left: 16px;
            right: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .fill-transfer-btn {
            background-color: #343437;
            border-radius: 24px;
            padding: 10px 16px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* ИЗМЕНЕНО: Увеличена длина кнопок с иконками */
        .transfer-data-controls {
            background-color: #343437;
            border-radius: 24px;
            padding: 12px 12px; /* Увеличено с 8px */
            display: flex;
            align-items: center;
            gap: 2px; /* Увеличено с 8px */
            height: 36px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            min-width: 32px; /* Добавлена минимальная ширина */
        }

        .transfer-data-control {
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Новая иконка для поддержки */
        .support-icon {
            width: 17px; /* ИЗМЕНЕНО: уменьшена на 2px с 20px */
            height: 17px; /* ИЗМЕНЕНО: уменьшена на 2px с 20px */
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 12px; /* ИЗМЕНЕНО: добавлен отступ слева от второй иконки */
        }

        /* ИЗМЕНЕНО: Убрана инверсия цвета для иконки поддержки */
        .support-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* filter: invert(1); УБРАНО */
        }

        .transfer-iframe-container {
            width: 100%;
            height: 100%;
            border-radius: 23px;
            overflow: hidden;
            background-color: #222224;
            position: relative;
            isolation: isolate;
        }

        .transfer-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background-color: white;
            border-radius: 23px;
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            opacity: 0;
            transition: opacity 0.01s ease;
        }

        .transfer-iframe.loaded {
            opacity: 1;
        }
        
        .transfer-iframe-container::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 0 0 8px 0;
            z-index: 3;
        }
        
        .transfer-iframe-container::after {
            content: '';
            position: absolute;
            top: -1px;
            right: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 0 0 0 8px;
            z-index: 3;
        }
        
        .transfer-iframe-container .corner-bottom-left {
            position: absolute;
            bottom: -1px;
            left: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 0 8px 0 0;
            z-index: 3;
        }
        
        .transfer-iframe-container .corner-bottom-right {
            position: absolute;
            bottom: -1px;
            right: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 8px 0 0 0;
            z-index: 3;
        }
        
        .transfer-iframe-mask {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            border-radius: 23px;
            box-shadow: inset 0 0 0 2px #222224;
        }

        /* Стили для модального окна обращений */
        .appeal-card {
            background-color: #222224;
            border-radius: 30px;
            width: 100%;
            position: relative;
            height: 248px;
            overflow: hidden;
            padding: 0;
            border: none;
        }

        .appeal-iframe-container {
            width: 100%;
            height: 100%;
            border-radius: 23px;
            overflow: hidden;
            background-color: #2c2c2d;
            position: relative;
            isolation: isolate;
        }

        .appeal-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background-color: white;
            border-radius: 23px;
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }
        
        .appeal-iframe-container::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 0 0 8px 0;
            z-index: 3;
        }
        
        .appeal-iframe-container::after {
            content: '';
            position: absolute;
            top: -1px;
            right: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 0 0 0 8px;
            z-index: 3;
        }
        
        .appeal-iframe-container .corner-bottom-left {
            position: absolute;
            bottom: -1px;
            left: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 0 8px 0 0;
            z-index: 3;
        }
        
        .appeal-iframe-container .corner-bottom-right {
            position: absolute;
            bottom: -1px;
            right: -1px;
            width: 16px;
            height: 16px;
            background: #222224;
            border-radius: 8px 0 0 0;
            z-index: 3;
        }
        
        .appeal-iframe-mask {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
            border-radius: 23px;
            box-shadow: inset 0 0 0 2px #222224;
        }

        /* Стили для модального окна статистики */
        .statistics-card {
            background-color: #222224;
            border-radius: 30px;
            padding: 16px;
            width: 100%;
        }

        .statistics-slider-container {
            position: relative;
            width: 100%;
            height: 38px;
            background-color: #1a1a1c;
            border-radius: 23px;
            margin: 0 0 16px 0;
            overflow: hidden;
        }

        .statistics-slider-line {
            display: flex;
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: 23px;
        }

        .statistics-slider-option {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 430;
            font-size: 16px;
            color: #888;
            cursor: pointer;
            transition: color 0.4s ease;
            z-index: 2;
            position: relative;
        }

        .statistics-slider-option.active {
            color: #fff;
        }

        .statistics-slider-indicator {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 33.33%;
            background-color: #303032;
            border-radius: 23px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            pointer-events: none;
        }

        .statistics-islands-container {
            display: flex;
            gap: 12px;
            width: 100%;
        }

        .statistics-island {
            flex: 1;
            background-color: #303032;
            border-radius: 24px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80px;
        }

        .statistics-island-content {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .statistics-icon {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
            margin-bottom: 1px;
        }

        .statistics-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .statistics-value {
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        .statistics-amount {
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        /* Убираем все возможные отступы */
        .page-container * {
            max-width: none !important;
        }
        
        /* Стиль для пустой категории Collections */
        .empty-collections {
            text-align: center;
            color: #888;
            font-size: 16px;
            padding: 40px 20px;
        }
        
        /* НОВЫЕ СТИЛИ ДЛЯ КОРЗИНЫ */
        .cart-items-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 0px;
            max-height: none;
            overflow-y: visible;
        }
        
        .cart-item {
            background-color: #272729;
            border-radius: 26px;
            padding: 10px;
            display: flex;
            align-items: center;
            height: 110px;
            position: relative;
        }
        
        .cart-item-image {
            width: 90px;
            height: 90px;
            border-radius: 21px;
            overflow: hidden;
            flex-shrink: 0;
            margin-right: 10px;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 21px;
        }
        
        .cart-item-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 0;
            height: 100%;
        }
        
        .cart-item-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-top: 7px;
        }
        
        .cart-item-title {
            color: white;
            font-size: 16px;
            font-weight: bold;
            line-height: 1.2;
        }
        
        .cart-item-collection {
            color: rgba(255, 255, 255, 0.5);
            font-size: 15px;
            line-height: 1.2;
        }
        
        .cart-item-bottom {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
            gap: 8px;
        }
        
        .cart-item-total-price {
            background-color: #313133;
            border: none;
            border-radius: 18px;
            padding: 5px 12px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 33px;
            flex: 1;
        }
        
        .total-price-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
        }
        
        .total-price-value {
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        .cart-item-remove-button {
            border: none;
            border-radius: 50%;
            width: 33px;
            height: 33px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            background-color: rgba(244, 67, 54, 0.15);
        }
        
        .cart-item-remove-icon {
            width: 18px;
            height: 18px;
            object-fit: contain;
            filter: brightness(0) saturate(100%) invert(30%) sepia(90%) saturate(2000%) hue-rotate(340deg) brightness(90%) contrast(90%);
        }
        
        .cart-footer {
            display: flex;
            gap: 12px;
            margin-top: 0;
            align-items: center;
            justify-content: center;
        }
        
        .cart-clear-btn {
            background-color: #323234;
            border: none;
            border-radius: 22px;
            padding: 6px 10px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-pay-btn {
            background-color: #0095FF;
            border: none;
            border-radius: 22px;
            padding: 6px 10px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-pay-btn.disabled {
            background-color: #343435;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .empty-cart {
            text-align: center;
            color: #888;
            font-size: 16px;
            padding: 40px 20px;
        }

        /* Фильтр для категории Bundles */
        .collections-category-filter {
            display: flex;
            gap: 8px;
            margin-bottom: 13px;
            width: 100%;
            display: none;
        }

        /* Стиль для модального окна с прокруткой */
        .modal-body.scrollable {
            max-height: 400px;
            overflow-y: auto;
        }

        .modal-body.scrollable::-webkit-scrollbar {
            width: 6px;
        }

        .modal-body.scrollable::-webkit-scrollbar-track {
            background: #1a1a1c;
            border-radius: 3px;
        }

        .modal-body.scrollable::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 3px;
        }

        /* СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА STAR GATE WALLET - ОБНОВЛЕНЫ */
        .wallet-card {
            background-color: #222224;
            border-radius: 34px;
            padding: 14px;
            width: 100%;
            min-height: auto;
        }

        /* Карточка баланса - теперь только островок без кнопок */
        .wallet-balance-container {
            background-color: #303032;
            border-radius: 25px;
            padding: 15px;
            width: 100%;
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100px; /* Уменьшена высота */
        }

        .wallet-balance-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .wallet-balance-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .wallet-balance-icon {
            width: 24px; /* Немного уменьшена */
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wallet-balance-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .wallet-balance-value {
            color: white;
            font-size: 28px; /* Немного уменьшен */
            font-weight: bold;
        }

        /* НОВЫЙ КОНТЕЙНЕР ДЛЯ КНОПОК - отдельно как в корзине */
        .wallet-footer {
            display: flex;
            gap: 12px;
            margin-top: 0;
            align-items: center;
            justify-content: center;
        }

        /* Стили для кнопок кошелька - теперь отдельные кнопки под карточкой баланса */
        .wallet-button {
            border: none;
            border-radius: 22px;
            padding: 6px 10px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Кнопка Promo Code - такой же фон как у Clear All */
        .wallet-button.promo {
            background-color: #323234; /* Такой же фон как у кнопки Clear All */
        }

        .wallet-button.promo:active {
            background-color: #3a3a3c;
        }

        /* Кнопка Deposit - синяя с иконкой */
        .wallet-button.deposit {
            background-color: #007AFF;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .wallet-button.deposit:active {
            background-color: #0056CC;
        }

        /* Иконка в кнопке Deposit */
        .deposit-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .deposit-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- Кнопки -->
        <div class="buttons-container">
            <button class="star-button" id="statisticsButton">
                <img src="https://storage.botpapa.me/files/d8b72ef0-a0f9-11f0-b4a0-d13431a40d5b.png" alt="Star Icon">
                <span class="star-number">90 458</span>
            </button>
            <div class="right-buttons">
                <!-- ИЗМЕНЕНА КНОПКА BUY TON -->
                <button class="buy-ton-button" id="buyTonButton">
                    <div class="buy-ton-left-icon">
                        <img src="https://storage.botpapa.me/files/45de9ba0-d370-11f0-99ce-adc3d9f181f8.png" alt="TON Icon">
                    </div>
                    0.00 RUB
                    <div class="buy-ton-right-icon">
                        <img src="https://storage.botpapa.me/files/1d61ec40-d370-11f0-99ce-adc3d9f181f8.png" alt="Arrow Icon">
                    </div>
                </button>
            </div>
        </div>
        
        <!-- Верхнее изображение -->
        <div class="header-image" onclick="window.open('https://t.me/ConvStarsBot', '_blank')">
            <img src="https://storage.botpapa.me/files/c1235790-d426-11f0-99ce-adc3d9f181f8.png" alt="Header Image">
        </div>
        
        <!-- Основной фильтр категорий -->
        <div class="slider-container">
            <div class="slider-line">
                <div class="slider-indicator" id="indicator"></div>
                <div class="slider-option active" onclick="moveSlider(0)">All items</div>
                <div class="slider-option" onclick="moveSlider(1)">Bundles</div>
            </div>
        </div>
        
        <!-- Новый фильтр Collections (только для категории All items) -->
        <div class="collections-filter" id="collectionsFilterContainer">
            <div class="filter-item wide" id="collectionsFilter">
                <div class="filter-text-top">Collection</div>
                <div class="filter-text-bottom" id="collectionsText">All items</div>
                <div class="filter-arrow">
                    <img src="https://storage.botpapa.me/files/93183790-ccff-11f0-aa62-f3a4d21b862b.png" alt="Arrow">
                </div>
            </div>
            <div class="filter-item wide" id="sortingFilter">
                <div class="filter-text-top">Selection</div>
                <div class="filter-text-bottom" id="sortingText">Random</div>
                <div class="filter-arrow">
                    <img src="https://storage.botpapa.me/files/93183790-ccff-11f0-aa62-f3a4d21b862b.png" alt="Arrow">
                </div>
            </div>
            <div class="filter-item square" id="cartFilter">
                <div class="filter-icon" id="cartIcon">
                    <img src="https://storage.botpapa.me/files/d05f9f80-cd54-11f0-aa62-f3a4d21b862b.svg" alt="Cart">
                </div>
            </div>
        </div>

        <!-- Фильтр для категории Bundles -->
        <div class="collections-category-filter" id="collectionsCategoryFilterContainer">
            <div class="filter-item wide" id="collectionsCategoryFilter">
                <div class="filter-text-top">Collection</div>
                <div class="filter-text-bottom" id="collectionsCategoryText">All items</div>
                <div class="filter-arrow">
                    <img src="https://storage.botpapa.me/files/93183790-ccff-11f0-aa62-f3a4d21b862b.png" alt="Arrow">
                </div>
            </div>
            <div class="filter-item wide" id="collectionsSortingFilter">
                <div class="filter-text-top">Selection</div>
                <div class="filter-text-bottom" id="collectionsSortingText">Random</div>
                <div class="filter-arrow">
                    <img src="https://storage.botpapa.me/files/93183790-ccff-11f0-aa62-f3a4d21b862b.png" alt="Arrow">
                </div>
            </div>
            <div class="filter-item square" id="collectionsCartFilter">
                <div class="filter-icon" id="collectionsCartIcon">
                    <img src="https://storage.botpapa.me/files/d05f9f80-cd54-11f0-aa62-f3a4d21b862b.svg" alt="Cart">
                </div>
            </div>
        </div>
        
        <!-- Сетка карточек -->
        <div class="cards-grid" id="cardsContainer">
            <!-- Карточки Stars (10 карточек) -->
            <div class="card active" data-category="all" data-subcategory="stars" data-order="1" data-price="135" data-name="100 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st100" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="100 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">100 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">135₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="stars" data-order="2" data-price="199" data-name="150 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st150" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="150 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">150 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">199₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="stars" data-order="3" data-price="329" data-name="250 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st250" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="250 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">250 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">329₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="stars" data-order="4" data-price="459" data-name="350 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st350" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="350 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">350 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">459₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="stars" data-order="5" data-price="639" data-name="500 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st500" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="500 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">500 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">639₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="stars" data-order="6" data-price="939" data-name="750 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st750" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="750 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">750 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">939₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="stars" data-order="7" data-price="1239" data-name="1000 Stars" data-image="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st1000" data-stat-icon="https://storage.botpapa.me/files/36335080-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/1ec68810-c2d7-11f0-b4a0-d13431a40d5b.jpg" alt="1000 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">1000 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">1239₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 1500 Stars карточка -->
            <div class="card active" data-category="all" data-subcategory="stars" data-order="8" data-price="1849" data-name="1500 Stars" data-image="https://storage.botpapa.me/files/06081dc0-c77d-11f0-aa62-f3a4d21b862b.png" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st1500" data-stat-icon="https://storage.botpapa.me/files/695c6410-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/06081dc0-c77d-11f0-aa62-f3a4d21b862b.png" alt="1500 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">1500 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">1849₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 2500 Stars карточка -->
            <div class="card active" data-category="all" data-subcategory="stars" data-order="9" data-price="3069" data-name="2500 Stars" data-image="https://storage.botpapa.me/files/cc0782b0-c0a0-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st2500" data-stat-icon="https://storage.botpapa.me/files/7e9c2630-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/cc0782b0-c0a0-11f0-b4a0-d13431a40d5b.jpg" alt="2500 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">2500 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">3069₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 5000 Stars карточка -->
            <div class="card active" data-category="all" data-subcategory="stars" data-order="10" data-price="6129" data-name="5000 Stars" data-image="https://storage.botpapa.me/files/cc0782b0-c0a0-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st5000" data-stat-icon="https://storage.botpapa.me/files/7e9c2630-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/cc0782b0-c0a0-11f0-b4a0-d13431a40d5b.jpg" alt="5000 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">5000 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">6129₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Карточки Gifts (4 карточки) -->
            <div class="card active" data-category="all" data-subcategory="gifts" data-order="11" data-price="25" data-name="13 Stars" data-image="https://storage.botpapa.me/files/f1461ad0-c160-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st13" data-stat-icon="https://storage.botpapa.me/files/3622b940-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/f1461ad0-c160-11f0-b4a0-d13431a40d5b.jpg" alt="13 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">13 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">25₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="gifts" data-order="12" data-price="39" data-name="21 Stars" data-image="https://storage.botpapa.me/files/73481e20-c161-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st21" data-stat-icon="https://storage.botpapa.me/files/42fb9a60-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/73481e20-c161-11f0-b4a0-d13431a40d5b.jpg" alt="21 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">21 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">39₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="gifts" data-order="13" data-price="69" data-name="43 Stars" data-image="https://storage.botpapa.me/files/c12289a0-c161-11f0-b4a0-d13431a40d5b.png" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st43" data-stat-icon="https://storage.botpapa.me/files/d3caca30-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/c12289a0-c161-11f0-b4a0-d13431a40d5b.png" alt="43 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">43 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">69₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="gifts" data-order="14" data-price="129" data-name="85 Stars" data-image="https://storage.botpapa.me/files/f1318bf0-c161-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st85" data-stat-icon="https://storage.botpapa.me/files/fb446170-c491-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/f1318bf0-c161-11f0-b4a0-d13431a40d5b.jpg" alt="85 Stars">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">85 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">129₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Карточки Toncoin (6 карточек) с обновленными ценами -->
            <div class="card active" data-category="all" data-subcategory="ton" data-order="15" data-price="169" data-name="1 Toncoin" data-image="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/tg1" data-stat-icon="https://storage.botpapa.me/files/149bf5c0-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" alt="1 Toncoin">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">1 Toncoin</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">169₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="ton" data-order="16" data-price="329" data-name="2 Toncoins" data-image="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/tg2" data-stat-icon="https://storage.botpapa.me/files/149bf5c0-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" alt="2 Toncoins">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">2 Toncoins</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">329₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="ton" data-order="17" data-price="489" data-name="3 Toncoins" data-image="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/tg3" data-stat-icon="https://storage.botpapa.me/files/149bf5c0-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" alt="3 Toncoins">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">3 Toncoins</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">489₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="ton" data-order="18" data-price="639" data-name="4 Toncoins" data-image="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/tg4" data-stat-icon="https://storage.botpapa.me/files/149bf5c0-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" alt="4 Toncoins">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">4 Toncoins</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">639₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="ton" data-order="19" data-price="789" data-name="5 Toncoins" data-image="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/tg5" data-stat-icon="https://storage.botpapa.me/files/149bf5c0-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" alt="5 Toncoins">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">5 Toncoins</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">789₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card active" data-category="all" data-subcategory="ton" data-order="20" data-price="1569" data-name="10 Toncoins" data-image="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/tg10" data-stat-icon="https://storage.botpapa.me/files/149bf5c0-c492-11f0-b4a0-d13431a40d5b.png" data-stat-link="" data-link="https://t.me/ConvStarsBot" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/9188b400-c2e5-11f0-b4a0-d13431a40d5b.jpg" alt="10 Toncoins">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">10 Toncoins</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">1569₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Новые карточки для категории Bundles (НЕ ВИДНЫ НА ГЛАВНОЙ СТРАНИЦЕ) -->
            <div class="card bundles-card" data-category="bundles" data-subcategory="gifts" data-order="21" data-price="49" data-name="26 Stars" data-image="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" data-image2="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st26" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="26 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="26 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">26 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">49₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="gifts" data-order="22" data-price="59" data-name="34 Stars" data-image="https://storage.botpapa.me/files/6bf2c4f0-d14b-11f0-99ce-adc3d9f181f8.jpg" data-image2="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st34" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/6bf2c4f0-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="34 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="34 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">34 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">59₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="gifts" data-order="23" data-price="89" data-name="56 Stars" data-image="https://storage.botpapa.me/files/8b17cab0-d14b-11f0-99ce-adc3d9f181f8.png" data-image2="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st56" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/8b17cab0-d14b-11f0-99ce-adc3d9f181f8.png" alt="56 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/24e90a10-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="56 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">56 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">89₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="gifts" data-order="24" data-price="99" data-name="64 Stars" data-image="https://storage.botpapa.me/files/8b17cab0-d14b-11f0-99ce-adc3d9f181f8.png" data-image2="https://storage.botpapa.me/files/a6f21240-d14b-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st64" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/8b17cab0-d14b-11f0-99ce-adc3d9f181f8.png" alt="64 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/a6f21240-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="64 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">64 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">99₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="stars" data-order="25" data-price="159" data-name="113 Stars" data-image="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" data-image2="https://storage.botpapa.me/files/f2835110-d14b-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st113" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="113 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/f2835110-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="113 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">113 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">159₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="stars" data-order="26" data-price="169" data-name="121 Stars" data-image="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" data-image2="https://storage.botpapa.me/files/5dd400e0-d14c-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st121" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="121 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/5dd400e0-d14c-11f0-99ce-adc3d9f181f8.jpg" alt="121 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">121 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">169₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="stars" data-order="27" data-price="249" data-name="185 Stars" data-image="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" data-image2="https://storage.botpapa.me/files/bb7d34f0-d14c-11f0-99ce-adc3d9f181f8.jpg" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st185" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="185 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/bb7d34f0-d14c-11f0-99ce-adc3d9f181f8.jpg" alt="185 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">185 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">249₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>

            <div class="card bundles-card" data-category="bundles" data-subcategory="stars" data-order="28" data-price="259" data-name="193 Stars" data-image="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" data-image2="https://storage.botpapa.me/files/f94d5580-d14c-11f0-99ce-adc3d9f181f8.png" data-iframe="https://app.botpapa.me/website/%40ConvStarsBot/st193" data-stat-icon="" data-stat-link="" data-link="" data-nft-id="">
                <div class="card-image-container">
                    <div class="card-image-wrapper">
                        <div class="card-image-slider">
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/d4ad6090-d14b-11f0-99ce-adc3d9f181f8.jpg" alt="193 Stars">
                            </div>
                            <div class="card-image-slide">
                                <img src="https://storage.botpapa.me/files/f94d5580-d14c-11f0-99ce-adc3d9f181f8.png" alt="193 Stars Image 2">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-title">193 Stars</div>
                    <div class="card-buttons">
                        <button class="price-button" onclick="openPaymentModal(this)">259₽</button>
                        <button class="cart-button" onclick="toggleCart(this)">
                            <img src="https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg" alt="Cart" class="cart-icon">
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно оплаты (для кнопок цены) -->
    <div class="modal-overlay" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn" id="checkoutBtn">Order Payment</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoPaymentModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closePaymentModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <!-- Карточка методов оплаты -->
                <div class="payment-methods-card">
                    <!-- Фильтр методов оплаты -->
                    <div class="payment-methods-slider-container">
                        <div class="payment-methods-slider-line">
                            <div class="payment-methods-slider-indicator" id="paymentMethodsIndicator"></div>
                            <div class="payment-methods-slider-option active" data-method="tpay">T-Pay</div>
                            <div class="payment-methods-slider-option" data-method="vtb">VTB</div>
                            <div class="payment-methods-slider-option" data-method="sber">Sber</div>
                        </div>
                    </div>
                    
                    <!-- Карточки оплаты - ТОЛЬКО ОДНА карточка, которая меняется в зависимости от выбранного банка -->
                    <div class="payment-cards-container">
                        <!-- Единственная карточка оплаты -->
                        <div class="payment-card" id="activePaymentCard">
                            <div class="payment-card-image">
                                <img src="https://storage.botpapa.me/files/ebd55f90-bd53-11f0-b4a0-d13431a40d5b.jpg" alt="T-Bank" id="paymentCardImage">
                            </div>
                            <div class="payment-card-content">
                                <div class="payment-card-text">
                                    <div class="payment-card-title" id="paymentCardTitle">T-Bank</div>
                                    <div class="payment-card-subtitle" id="paymentCardSubtitle">Card Payment</div>
                                </div>
                                <button class="payment-card-button" id="activePayBtn">Pay 135₽</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Карточка заполнения данных с iframe -->
                <div class="transfer-data-card">
                    <div class="transfer-data-header">
                        <button class="fill-transfer-btn">Fill in Transfer Data</button>
                        <div class="transfer-data-controls">
                            <div class="transfer-data-control" id="infoTransferModal">
                                <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                                </svg>
                            </div>
                            <div class="support-icon" id="supportIcon">
                                <img src="https://storage.botpapa.me/files/47f83130-d38e-11f0-99ce-adc3d9f181f8.png" alt="Support">
                            </div>
                        </div>
                    </div>
                    
                    <div class="transfer-iframe-container">
                        <div class="corner-bottom-left"></div>
                        <div class="corner-bottom-right"></div>
                        <div class="transfer-iframe-mask"></div>
                        <iframe class="transfer-iframe" id="paymentIframe" src="https://app.botpapa.me/website/%40ConvStarsBot/st100" frameborder="0"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно корзины -->
    <div class="modal-overlay" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Cart Products</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoCartModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeCartModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="cart-items-container" id="cartItemsContainer">
                    <!-- Карточки будут добавляться динамически -->
                </div>
                
                <div class="cart-footer">
                    <button class="cart-clear-btn" id="clearCartBtn">Clear All</button>
                    <button class="cart-pay-btn" id="cartPayBtn">Add Product</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно корзины для категории Bundles -->
    <div class="modal-overlay" id="bundlesCartModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Cart Products</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoBundlesCartModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeBundlesCartModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="cart-items-container" id="bundlesCartItemsContainer">
                    <!-- Карточки будут добавляться динамически -->
                </div>
                
                <div class="cart-footer">
                    <button class="cart-clear-btn" id="clearBundlesCartBtn">Clear All</button>
                    <button class="cart-pay-btn" id="bundlesCartPayBtn">Add Product</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно выбора коллекций для категории All items -->
    <div class="modal-overlay" id="collectionsModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Select Collections</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoCollectionsModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeCollectionsModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="selection-card">
                    <div class="selection-item" onclick="selectCollection('all')">
                        <div class="selection-icon selected" id="collectionAll"></div>
                        <div class="selection-text">All Collections</div>
                    </div>
                    <div class="selection-item" onclick="selectCollection('gifts')">
                        <div class="selection-icon" id="collectionGifts"></div>
                        <div class="selection-text">Telegram Gifts</div>
                    </div>
                    <div class="selection-item" onclick="selectCollection('stars')">
                        <div class="selection-icon" id="collectionStars"></div>
                        <div class="selection-text">Telegram Stars</div>
                    </div>
                    <div class="selection-item" onclick="selectCollection('ton')">
                        <div class="selection-icon" id="collectionTon"></div>
                        <div class="selection-text">Telegram Toncoin</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно выбора коллекций для категории Bundles -->
    <div class="modal-overlay" id="bundlesModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Select Collections</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoBundlesModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeBundlesModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="selection-card">
                    <div class="selection-item" onclick="selectBundlesCollection('all')">
                        <div class="selection-icon selected" id="bundlesCollectionAll"></div>
                        <div class="selection-text">All Collections</div>
                    </div>
                    <div class="selection-item" onclick="selectBundlesCollection('gifts')">
                        <div class="selection-icon" id="bundlesCollectionGifts"></div>
                        <div class="selection-text">Telegram Gifts</div>
                    </div>
                    <div class="selection-item" onclick="selectBundlesCollection('stars')">
                        <div class="selection-icon" id="bundlesCollectionStars"></div>
                        <div class="selection-text">Telegram Stars</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно выбора сортировки для категории Bundles -->
    <div class="modal-overlay" id="bundlesSortingModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Select Sorting</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoBundlesSortingModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeBundlesSortingModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="selection-card">
                    <div class="selection-item" onclick="selectBundlesSorting('random')">
                        <div class="selection-icon selected" id="bundlesSortingRandom"></div>
                        <div class="selection-text">Random</div>
                    </div>
                    <div class="selection-item" onclick="selectBundlesSorting('low')">
                        <div class="selection-icon" id="bundlesSortingLow"></div>
                        <div class="selection-text">Price: Low to High</div>
                    </div>
                    <div class="selection-item" onclick="selectBundlesSorting('high')">
                        <div class="selection-icon" id="bundlesSortingHigh"></div>
                        <div class="selection-text">Price: High to Low</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно выбора сортировки -->
    <div class="modal-overlay" id="sortingModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Select Sorting</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoSortingModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeSortingModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="selection-card">
                    <div class="selection-item" onclick="selectSorting('random')">
                        <div class="selection-icon selected" id="sortingRandom"></div>
                        <div class="selection-text">Random</div>
                    </div>
                    <div class="selection-item" onclick="selectSorting('low')">
                        <div class="selection-icon" id="sortingLow"></div>
                        <div class="selection-text">Price: Low to High</div>
                    </div>
                    <div class="selection-item" onclick="selectSorting('high')">
                        <div class="selection-icon" id="sortingHigh"></div>
                        <div class="selection-text">Price: High to Low</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно статистики -->
    <div class="modal-overlay" id="statisticsModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Stars Statistics</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoStatisticsModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeStatisticsModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="statistics-card">
                    <div class="statistics-slider-container">
                        <div class="statistics-slider-line">
                            <div class="statistics-slider-indicator" id="statisticsIndicator"></div>
                            <div class="statistics-slider-option active" data-period="all" onclick="moveStatisticsSlider(0)">All</div>
                            <div class="statistics-slider-option" data-period="24h" onclick="moveStatisticsSlider(1)">24h</div>
                            <div class="statistics-slider-option" data-period="7d" onclick="moveStatisticsSlider(2)">7d</div>
                        </div>
                    </div>
                    
                    <div class="statistics-islands-container">
                        <div class="statistics-island">
                            <div class="statistics-island-content">
                                <div class="statistics-icon">
                                    <img src="https://storage.botpapa.me/files/d8b72ef0-a0f9-11f0-b4a0-d13431a40d5b.png" alt="Star Icon">
                                </div>
                                <div class="statistics-value" id="starsValue">90 458</div>
                            </div>
                        </div>
                        <div class="statistics-island">
                            <div class="statistics-amount" id="amountValue">124 779₽</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно TON Statistics -->
    <div class="modal-overlay" id="tonStatisticsModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">TON Statistics</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoTonStatisticsModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeTonStatisticsModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="statistics-card">
                    <div class="statistics-slider-container">
                        <div class="statistics-slider-line">
                            <div class="statistics-slider-indicator" id="tonStatisticsIndicator"></div>
                            <div class="statistics-slider-option active" data-period="all" onclick="moveTonStatisticsSlider(0)">All</div>
                            <div class="statistics-slider-option" data-period="24h" onclick="moveTonStatisticsSlider(1)">24h</div>
                            <div class="statistics-slider-option" data-period="7d" onclick="moveTonStatisticsSlider(2)">7d</div>
                        </div>
                    </div>
                    
                    <div class="statistics-islands-container">
                        <div class="statistics-island">
                            <div class="statistics-island-content">
                                <div class="statistics-icon" style="margin-bottom: 1px;">
                                    <img src="https://storage.botpapa.me/files/208e3150-c49b-11f0-b4a0-d13431a40d5b.png" alt="TON Icon">
                                </div>
                                <div class="statistics-value" id="tonValue">0</div>
                            </div>
                        </div>
                        <div class="statistics-island">
                            <div class="statistics-amount" id="tonAmountValue">0₽</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно обращений -->
    <div class="modal-overlay" id="appealModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">Send an Appeal</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoAppealModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeAppealModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="appeal-card">
                    <div class="appeal-iframe-container">
                        <div class="corner-bottom-left"></div>
                        <div class="corner-bottom-right"></div>
                        <div class="appeal-iframe-mask"></div>
                        <iframe class="appeal-iframe" src="https://app.botpapa.me/website/%40ConvStarsBot/sapp" frameborder="0"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно StarGate Wallet - ОБНОВЛЕНО (кнопки теперь отдельно под карточкой баланса) -->
    <div class="modal-overlay" id="walletModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="checkout-btn">StarGate Wallet</button>
                <div class="modal-controls">
                    <div class="modal-control" id="infoWalletModal">
                        <svg class="info-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                        </svg>
                    </div>
                    <div class="modal-control" id="closeWalletModal">
                        <svg class="close-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="wallet-card">
                    <!-- Карточка баланса - теперь только островок без кнопок -->
                    <div class="wallet-balance-container">
                        <div class="wallet-balance-label">Your Balance</div>
                        <div class="wallet-balance-content">
                            <div class="wallet-balance-icon">
                                <img src="https://storage.botpapa.me/files/2552eb00-d462-11f0-99ce-adc3d9f181f8.png" alt="Balance Icon">
                            </div>
                            <div class="wallet-balance-value" id="walletBalanceValue">0.00 RUB</div>
                        </div>
                    </div>
                    
                    <!-- Отдельные кнопки под карточкой баланса -->
                    <div class="wallet-footer">
                        <!-- Кнопка Promo Code - такой же фон как у Clear All -->
                        <button class="wallet-button promo" id="promoButton">Promo Code</button>
                        <!-- Кнопка Deposit - синяя с иконкой -->
                        <button class="wallet-button deposit" id="depositButton">
                            <div class="deposit-icon">
                                <img src="https://storage.botpapa.me/files/c4cb0100-d461-11f0-99ce-adc3d9f181f8.png" alt="Deposit Icon">
                            </div>
                            Deposit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Текущие состояния фильтров
        let currentMainFilter = 'all';
        let currentCollectionFilter = 'all';
        let currentSorting = 'random';
        let isSearchOpen = false;
        
        // Фильтры для категории Bundles
        let currentBundlesCollectionFilter = 'all';
        let currentBundlesSorting = 'random';
        
        // Текущий выбранный продукт
        let currentProduct = null;

        // Единая корзина для всех категорий (максимум 2 товара)
        let cart = [];

        // Модальные окна
        const paymentModal = document.getElementById('paymentModal');
        const cartModal = document.getElementById('cartModal');
        const bundlesCartModal = document.getElementById('bundlesCartModal');
        const collectionsModal = document.getElementById('collectionsModal');
        const bundlesModal = document.getElementById('bundlesModal');
        const bundlesSortingModal = document.getElementById('bundlesSortingModal');
        const sortingModal = document.getElementById('sortingModal');
        const statisticsModal = document.getElementById('statisticsModal');
        const tonStatisticsModal = document.getElementById('tonStatisticsModal');
        const appealModal = document.getElementById('appealModal');
        const walletModal = document.getElementById('walletModal');

        // Элементы
        const closePaymentModalBtn = document.getElementById('closePaymentModal');
        const infoPaymentModalBtn = document.getElementById('infoPaymentModal');
        const infoTransferModalBtn = document.getElementById('infoTransferModal');
        const supportIcon = document.getElementById('supportIcon');
        const activePayBtn = document.getElementById('activePayBtn');
        const paymentMethodsOptions = document.querySelectorAll('#paymentModal .payment-methods-slider-option');
        const paymentMethodsIndicator = document.getElementById('paymentMethodsIndicator');
        const paymentIframe = document.getElementById('paymentIframe');
        
        // Элементы активной карточки оплаты
        const activePaymentCard = document.getElementById('activePaymentCard');
        const paymentCardImage = document.getElementById('paymentCardImage');
        const paymentCardTitle = document.getElementById('paymentCardTitle');
        const paymentCardSubtitle = document.getElementById('paymentCardSubtitle');

        // Элементы корзины
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        const closeCartModalBtn = document.getElementById('closeCartModal');
        const infoCartModalBtn = document.getElementById('infoCartModal');
        const clearCartBtn = document.getElementById('clearCartBtn');
        const cartPayBtn = document.getElementById('cartPayBtn');

        // Элементы корзины для категории Bundles
        const bundlesCartItemsContainer = document.getElementById('bundlesCartItemsContainer');
        const closeBundlesCartModalBtn = document.getElementById('closeBundlesCartModal');
        const infoBundlesCartModalBtn = document.getElementById('infoBundlesCartModal');
        const clearBundlesCartBtn = document.getElementById('clearBundlesCartBtn');
        const bundlesCartPayBtn = document.getElementById('bundlesCartPayBtn');

        // Элементы фильтров
        const collectionsFilterContainer = document.getElementById('collectionsFilterContainer');
        const collectionsFilter = document.getElementById('collectionsFilter');
        const sortingFilter = document.getElementById('sortingFilter');
        const cartFilter = document.getElementById('cartFilter');
        const collectionsText = document.getElementById('collectionsText');
        const sortingText = document.getElementById('sortingText');
        const cartIcon = document.getElementById('cartIcon');

        // Элементы фильтра для категории Bundles
        const bundlesFilterContainer = document.getElementById('collectionsCategoryFilterContainer');
        const bundlesFilter = document.getElementById('collectionsCategoryFilter');
        const bundlesSortingFilter = document.getElementById('collectionsSortingFilter');
        const bundlesCartFilter = document.getElementById('collectionsCartFilter');
        const bundlesText = document.getElementById('collectionsCategoryText');
        const bundlesSortingText = document.getElementById('collectionsSortingText');
        const bundlesCartIcon = document.getElementById('collectionsCartIcon');

        // Кнопки
        const statisticsButton = document.getElementById('statisticsButton');
        const buyTonButton = document.getElementById('buyTonButton');
        const closeCollectionsBtn = document.getElementById('closeCollectionsModal');
        const infoCollectionsBtn = document.getElementById('infoCollectionsModal');
        const closeBundlesBtn = document.getElementById('closeBundlesModal');
        const infoBundlesBtn = document.getElementById('infoBundlesModal');
        const closeBundlesSortingBtn = document.getElementById('closeBundlesSortingModal');
        const infoBundlesSortingBtn = document.getElementById('infoBundlesSortingModal');
        const closeSortingBtn = document.getElementById('closeSortingModal');
        const infoSortingBtn = document.getElementById('infoSortingModal');
        const closeStatisticsBtn = document.getElementById('closeStatisticsModal');
        const infoStatisticsBtn = document.getElementById('infoStatisticsModal');
        const closeTonStatisticsBtn = document.getElementById('closeTonStatisticsModal');
        const infoTonStatisticsBtn = document.getElementById('infoTonStatisticsModal');
        const closeAppealModalBtn = document.getElementById('closeAppealModal');
        const infoAppealModalBtn = document.getElementById('infoAppealModal');
        const closeWalletModalBtn = document.getElementById('closeWalletModal');
        const infoWalletModalBtn = document.getElementById('infoWalletModal');
        const depositButton = document.getElementById('depositButton');
        const promoButton = document.getElementById('promoButton');

        // Данные для статистики
        const statisticsData = {
            'all': { stars: '90 458', amount: '124 779₽' },
            '24h': { stars: '163', amount: '224₽' },
            '7d': { stars: '163', amount: '224₽' }
        };

        // Данные для TON статистики
        const tonStatisticsData = {
            'all': { ton: '0', amount: '0₽' },
            '24h': { ton: '0', amount: '0₽' },
            '7d': { ton: '0', amount: '0₽' }
        };

        // Данные для банков
        const bankData = {
            'tpay': {
                image: 'https://storage.botpapa.me/files/ebd55f90-bd53-11f0-b4a0-d13431a40d5b.jpg',
                title: 'T-Bank',
                subtitle: 'Card Payment'
            },
            'vtb': {
                image: 'https://storage.botpapa.me/files/e32fffa0-c2dd-11f0-b4a0-d13431a40d5b.png',
                title: 'VTB Bank',
                subtitle: 'Card Payment'
            },
            'sber': {
                image: 'https://storage.botpapa.me/files/001ba680-bd54-11f0-b4a0-d13431a40d5b.png',
                title: 'SberBank',
                subtitle: 'Card Payment'
            }
        };

        // Данные для ссылок оплаты - ОБНОВЛЕННЫЕ ПО ТЗ
        const paymentLinks = {
            // Т-Банк для всех товаров - https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749
            // Gifts (13-85 Stars) с индивидуальными ссылками для VTB и Sber
            '13 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=0387c448-f2d4-4d7f-a2ca-3b2b2db5fe45',
                sber: 'https://messenger.online.sberbank.ru/sl/XfiY8AZ72t9VKxlxV'
            },
            '21 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=8c005446-a1ab-485f-8cfe-5e92770ae599',
                sber: 'https://messenger.online.sberbank.ru/sl/mWhVmoD7JbuzrObSJ'
            },
            '43 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=4fa46ddf-e063-470a-ad12-002164f233d1',
                sber: 'https://messenger.online.sberbank.ru/sl/NtbKRyylG1t95XRns'
            },
            '85 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=ecf71d20-e3f9-45e0-aaa6-184d9544d3ce',
                sber: 'https://messenger.online.sberbank.ru/sl/yv1CVMAJrcuZUtmh8'
            },
            
            // Stars (100-5000) - все T-Банк, остальные старые ссылки
            '100 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '150 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '250 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '350 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '500 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '750 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '1000 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '1500 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '2500 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            '5000 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=bd95328b-1ed3-4a50-b126-7737f89bfc6e',
                sber: 'https://messenger.online.sberbank.ru/sl/4vdE1lwUnUIfKiR0Q'
            },
            
            // Toncoin (1-10) с обновленными ценами - все T-Банк, остальные старые ссылки
            '1 Toncoin': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a5418107-98a7-4f91-839d-4a2b1d05ec06',
                sber: 'https://messenger.online.sberbank.ru/sl/guIv8l23igAQewXS9'
            },
            '2 Toncoins': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a5418107-98a7-4f91-839d-4a2b1d05ec06',
                sber: 'https://messenger.online.sberbank.ru/sl/guIv8l23igAQewXS9'
            },
            '3 Toncoins': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a5418107-98a7-4f91-839d-4a2b1d05ec06',
                sber: 'https://messenger.online.sberbank.ru/sl/guIv8l23igAQewXS9'
            },
            '4 Toncoins': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a5418107-98a7-4f91-839d-4a2b1d05ec06',
                sber: 'https://messenger.online.sberbank.ru/sl/guIv8l23igAQewXS9'
            },
            '5 Toncoins': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a5418107-98a7-4f91-839d-4a2b1d05ec06',
                sber: 'https://messenger.online.sberbank.ru/sl/guIv8l23igAQewXS9'
            },
            '10 Toncoins': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a5418107-98a7-4f91-839d-4a2b1d05ec06',
                sber: 'https://messenger.online.sberbank.ru/sl/guIv8l23igAQewXS9'
            },
            
            // Новые карточки для Bundles (только в категории Bundles)
            '26 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=4d91f8e2-c10c-4a9a-b741-1d589aebfb82',
                sber: 'https://messenger.online.sberbank.ru/sl/Ayd2V5INavcjzusYY'
            },
            '34 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=7f87e9c6-d859-425b-806a-a34dc1816da0',
                sber: 'https://messenger.online.sberbank.ru/sl/5YgWwzhzpMcjpUDyO'
            },
            '56 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=8c70ca38-a3ed-40c6-b9ab-551a0bfc723a',
                sber: 'https://messenger.online.sberbank.ru/sl/YJc7XJVLQoEPOvW5c'
            },
            '64 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=a7939edb-725c-4580-9164-fcb9abc43f23',
                sber: 'https://messenger.online.sberbank.ru/sl/QwArHQrPvBkn6bQ0L'
            },
            '113 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=ed48c33a-84d1-4e13-8683-bf2714bce616',
                sber: 'https://messenger.online.sberbank.ru/sl/c9AYQoJhVu5nhzDGL'
            },
            '121 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=ed48c33a-84d1-4e13-8683-bf2714bce616',
                sber: 'https://messenger.online.sberbank.ru/sl/c9AYQoJhVu5nhzDGL'
            },
            '185 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=ed48c33a-84d1-4e13-8683-bf2714bce616',
                sber: 'https://messenger.online.sberbank.ru/sl/c9AYQoJhVu5nhzDGL'
            },
            '193 Stars': {
                tpay: 'https://www.tinkoff.ru/rm/r_yChgsQmApD.BxzXxufApz/amjYu11749',
                vtb: 'https://vtb.paymo.ru/collect-money/?transaction=ed48c33a-84d1-4e13-8683-bf2714bce616',
                sber: 'https://messenger.online.sberbank.ru/sl/c9AYQoJhVu5nhzDGL'
            }
        };

        // Функция для перемешивания массива
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Функция для инициализации свайпа для карточек с двумя изображениями
        function initCardSwipes() {
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                const image2 = card.getAttribute('data-image2');
                if (!image2) return; // Пропускаем карточки без второго изображения
                
                const slider = card.querySelector('.card-image-slider');
                const slides = card.querySelectorAll('.card-image-slide');
                
                if (slides.length < 2) return;
                
                let startX = 0;
                let currentTranslate = 0;
                let currentSlide = 0;
                
                // Функция для перехода к слайду
                function goToSlide(index) {
                    currentSlide = index;
                    currentTranslate = -index * 100;
                    slider.style.transform = `translateX(${currentTranslate}%)`;
                }
                
                // Обработчик touchstart
                card.addEventListener('touchstart', function(e) {
                    startX = e.touches[0].clientX;
                });
                
                // Обработчик touchmove
                card.addEventListener('touchmove', function(e) {
                    if (!startX) return;
                    
                    const currentX = e.touches[0].clientX;
                    const diffX = startX - currentX;
                    
                    // Предотвращаем вертикальную прокрутку при горизонтальном свайпе
                    if (Math.abs(diffX) > Math.abs(e.touches[0].clientY - startX)) {
                        e.preventDefault();
                    }
                });
                
                // Обработчик touchend
                card.addEventListener('touchend', function(e) {
                    if (!startX) return;
                    
                    const endX = e.changedTouches[0].clientX;
                    const diffX = startX - endX;
                    
                    // Минимальное расстояние для свайпа
                    const minSwipeDistance = 30;
                    
                    if (Math.abs(diffX) > minSwipeDistance) {
                        if (diffX > 0) {
                            // Свайп влево - следующий слайд
                            if (currentSlide < slides.length - 1) {
                                goToSlide(currentSlide + 1);
                            }
                        } else {
                            // Свайп вправо - предыдущий слайд
                            if (currentSlide > 0) {
                                goToSlide(currentSlide - 1);
                            }
                        }
                    }
                    
                    startX = 0;
                });
                
                // Также добавляем обработчики для кликов мыши (для тестирования)
                card.addEventListener('mousedown', function(e) {
                    startX = e.clientX;
                });
                
                card.addEventListener('mouseup', function(e) {
                    if (!startX) return;
                    
                    const endX = e.clientX;
                    const diffX = startX - endX;
                    
                    // Минимальное расстояние для свайпа
                    const minSwipeDistance = 30;
                    
                    if (Math.abs(diffX) > minSwipeDistance) {
                        if (diffX > 0) {
                            // Свайп влево - следующий слайд
                            if (currentSlide < slides.length - 1) {
                                goToSlide(currentSlide + 1);
                            }
                        } else {
                            // Свайп вправо - предыдущий слайд
                            if (currentSlide > 0) {
                                goToSlide(currentSlide - 1);
                            }
                        }
                    }
                    
                    startX = 0;
                });
            });
        }

        // Функция для переключения состояния корзины (добавление/удаление) для всех категорий
        function toggleCart(button) {
            const card = button.closest('.card');
            const name = card.getAttribute('data-name');
            const price = parseInt(card.getAttribute('data-price'));
            const image = card.getAttribute('data-image');
            const subcategory = card.getAttribute('data-subcategory');
            const iframe = card.getAttribute('data-iframe');
            const category = card.getAttribute('data-category');
            const nftId = card.getAttribute('data-nft-id');
            
            // Проверяем, есть ли уже такой товар в корзине
            const existingItemIndex = cart.findIndex(item => item.name === name && item.nftId === nftId);
            
            if (existingItemIndex !== -1) {
                // Если товар уже есть, удаляем его из корзины
                cart.splice(existingItemIndex, 1);
                
                // Возвращаем иконку по умолчанию
                const icon = button.querySelector('img');
                icon.src = 'https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg';
                icon.className = 'cart-icon';
                button.classList.remove('in-cart');
            } else {
                // Проверяем, не превышен ли лимит корзины (теперь 2 товара)
                if (cart.length >= 2) {
                    // Если корзина уже полна, ничего не делаем
                    return;
                }
                
                // Если товара нет и корзина не полна, добавляем новый
                cart.push({
                    name: name,
                    price: price,
                    image: image,
                    subcategory: subcategory,
                    iframe: iframe,
                    category: category,
                    nftId: nftId,
                    active: true // по умолчанию товар активен
                });
                
                // Меняем иконку на добавленную
                const icon = button.querySelector('img');
                icon.src = 'https://storage.botpapa.me/files/4da523d0-cd63-11f0-aa62-f3a4d21b862b.png';
                icon.className = 'cart-added-icon';
                button.classList.add('in-cart');
            }
            
            // Обновляем отображение корзины
            updateCartDisplay();
            
            // Обновляем фон третьего элемента фильтра
            updateCartFilterBackground();
        }

        // Функция для удаления товара из корзины
        function removeFromCart(name, nftId) {
            cart = cart.filter(item => !(item.name === name && item.nftId === nftId));
            
            // Обновляем иконки в карточках товаров
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const cardName = card.getAttribute('data-name');
                const cardNftId = card.getAttribute('data-nft-id');
                if (cardName === name && cardNftId === nftId) {
                    const button = card.querySelector('.cart-button');
                    const icon = button.querySelector('img');
                    icon.src = 'https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg';
                    icon.className = 'cart-icon';
                    button.classList.remove('in-cart');
                }
            });
            
            updateCartDisplay();
            updateCartFilterBackground();
            
            // Если корзина пуста, закрываем модальное окно
            if (cart.length === 0) {
                cartModal.classList.remove('show');
                bundlesCartModal.classList.remove('show');
            }
        }

        // Функция для получения названия коллекции по подкатегории
        function getCollectionName(subcategory) {
            switch(subcategory) {
                case 'stars': return 'Telegram Stars';
                case 'gifts': return 'Telegram Gifts';
                case 'ton': return 'Telegram Toncoin';
                default: return 'Telegram Gifts';
            }
        }

        // Функция для форматирования названия товара для корзины
        function formatCartItemName(name, nftId) {
            // Для ВСЕХ NFT товаров добавляем номер #ID
            if (nftId && nftId !== '') {
                return `${name} #${nftId}`;
            }
            
            // Проверяем, является ли товар Stars
            if (name.includes('Stars')) {
                const count = name.split(' ')[0];
                return `${count} Telegram Stars`;
            }
            
            // Проверяем, является ли товар Toncoin
            if (name.includes('Toncoin')) {
                const count = name.split(' ')[0];
                if (name.includes('Toncoins')) {
                    return `${count} Telegram Toncoins`;
                } else {
                    return `${count} Telegram Toncoin`;
                }
            }
            
            // Для остальных товаров возвращаем оригинальное название
            return name;
        }

        // Функция для форматирования названия товара для заголовка модального окна
        function formatModalTitle(name, nftId) {
            // Для ВСЕХ NFT товаров добавляем номер #ID
            if (nftId && nftId !== '') {
                return `${name} #${nftId}`;
            }
            
            // Проверяем, является ли товар Stars
            if (name.includes('Stars')) {
                const count = name.split(' ')[0];
                return `${count} Telegram Stars`;
            }
            
            // Проверяем, является ли товар Toncoin
            if (name.includes('Toncoin')) {
                const count = name.split(' ')[0];
                if (name.includes('Toncoins')) {
                    return `${count} Telegram Toncoins`;
                } else {
                    return `${count} Telegram Toncoin`;
                }
            }
            
            // Для остальных товаров возвращаем оригинальное название
            return name;
        }

        // Функция для обновления фона третьего элемента фильтра для категории All items
        function updateCartFilterBackground() {
            if (cart.length > 0) {
                cartFilter.classList.add('active');
                bundlesCartFilter.classList.add('active');
            } else {
                cartFilter.classList.remove('active');
                bundlesCartFilter.classList.remove('active');
            }
        }

        // Функция для обновления отображения корзины
        function updateCartDisplay() {
            // Очищаем контейнер корзины
            cartItemsContainer.innerHTML = '';
            bundlesCartItemsContainer.innerHTML = '';
            
            // Добавляем карточки из корзины
            cart.forEach(item => {
                const formattedName = formatCartItemName(item.name, item.nftId);
                let collectionName;
                
                // Для всех NFT товаров показываем "Telegram Gifts"
                if (item.nftId && item.nftId !== '') {
                    collectionName = 'Telegram Gifts';
                } else {
                    collectionName = getCollectionName(item.subcategory);
                }
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.setAttribute('data-name', item.name);
                cartItem.setAttribute('data-price', item.price);
                cartItem.setAttribute('data-image', item.image);
                cartItem.setAttribute('data-iframe', item.iframe);
                cartItem.setAttribute('data-nft-id', item.nftId);
                cartItem.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="cart-item-content">
                        <div class="cart-item-info">
                            <div class="cart-item-title">${formattedName}</div>
                            <div class="cart-item-collection">${collectionName}</div>
                        </div>
                        <div class="cart-item-bottom">
                            <div class="cart-item-total-price">
                                <span class="total-price-label">Price</span>
                                <span class="total-price-value">${item.price}₽</span>
                            </div>
                            <button class="cart-item-remove-button" onclick="removeFromCart('${item.name}', '${item.nftId}')">
                                <img src="https://storage.botpapa.me/files/eb4f82d0-ce1f-11f0-aa62-f3a4d21b862b.png" alt="Remove" class="cart-item-remove-icon">
                            </button>
                        </div>
                    </div>
                `;
                
                cartItemsContainer.appendChild(cartItem);
                bundlesCartItemsContainer.appendChild(cartItem.cloneNode(true));
            });
            
            // Обновляем общую сумму и состояние кнопки Pay
            updateTotalPrice();
            updatePayButtonState();
        }

        // Функция для обновления общей суммы
        function updateTotalPrice() {
            const totalPrice = cart.reduce((total, item) => {
                return total + item.price;
            }, 0);
            
            if (totalPrice > 0) {
                cartPayBtn.textContent = `Pay ${totalPrice}₽`;
                bundlesCartPayBtn.textContent = `Pay ${totalPrice}₽`;
            } else {
                cartPayBtn.textContent = 'Add Product';
                bundlesCartPayBtn.textContent = 'Add Product';
            }
        }

        // Функция для обновления состояния кнопки Pay
        function updatePayButtonState() {
            if (cart.length === 0) {
                cartPayBtn.classList.add('disabled');
                cartPayBtn.disabled = true;
                bundlesCartPayBtn.classList.add('disabled');
                bundlesCartPayBtn.disabled = true;
            } else if (cart.length === 1) {
                cartPayBtn.classList.remove('disabled');
                cartPayBtn.disabled = false;
                bundlesCartPayBtn.classList.remove('disabled');
                bundlesCartPayBtn.disabled = false;
            } else if (cart.length >= 2) {
                // Если в корзине 2 или больше товаров, кнопка будет синей и активной
                cartPayBtn.classList.remove('disabled');
                cartPayBtn.disabled = false;
                cartPayBtn.style.backgroundColor = '#0095FF';
                bundlesCartPayBtn.classList.remove('disabled');
                bundlesCartPayBtn.disabled = false;
                bundlesCartPayBtn.style.backgroundColor = '#0095FF';
            }
        }

        // Функция для открытия модального окна оплаты из корзины
        function openPaymentFromCart() {
            if (cart.length === 0) {
                // Если корзина пуста, просто закрываем корзину
                cartModal.classList.remove('show');
                bundlesCartModal.classList.remove('show');
                return;
            }
            
            if (cart.length >= 2) {
                // Если в корзине 2 или больше товаров, показываем сообщение
                alert('Buying more than one item is temporarily unavailable');
                return;
            }
            
            // Сначала закрываем окно корзины
            cartModal.classList.remove('show');
            bundlesCartModal.classList.remove('show');
            
            // Если в корзине только один товар, открываем модальное окно оплаты именно этого товара
            if (cart.length === 1) {
                const singleItem = cart[0];
                
                // Обновляем текст кнопки оплаты
                activePayBtn.textContent = `Pay ${singleItem.price}₽`;
                
                // Обновляем заголовок модального окна
                const modalTitle = formatModalTitle(singleItem.name, singleItem.nftId);
                document.getElementById('checkoutBtn').textContent = modalTitle;
                
                // Сбрасываем iframe и показываем загрузку
                paymentIframe.classList.remove('loaded');
                paymentIframe.src = singleItem.iframe;
                
                // Сохраняем текущий продукт
                currentProduct = { price: singleItem.price, name: singleItem.name, nftId: singleItem.nftId };
                
                // Открываем окно оплаты после небольшой задержки для плавного перехода
                setTimeout(() => {
                    paymentModal.classList.add('show');
                }, 300);
                
                // Ждем загрузки iframe и показываем его
                paymentIframe.onload = function() {
                    setTimeout(() => {
                        paymentIframe.classList.add('loaded');
                    }, 30);
                };
            }
        }

        // Функция для открытия модального окна оплаты (для кнопок цены)
        function openPaymentModal(button) {
            const card = button.closest('.card');
            const price = card.getAttribute('data-price');
            const name = card.getAttribute('data-name');
            const iframeSrc = card.getAttribute('data-iframe');
            const nftId = card.getAttribute('data-nft-id');
            
            // Обновляем текст кнопки оплаты
            activePayBtn.textContent = `Pay ${price}₽`;
            
            // Обновляем заголовок модального окна
            const modalTitle = formatModalTitle(name, nftId);
            document.getElementById('checkoutBtn').textContent = modalTitle;
            
            // Сбрасываем iframe и показываем загрузку
            paymentIframe.classList.remove('loaded');
            paymentIframe.src = iframeSrc;
            
            // Сохраняем текущий продукт
            currentProduct = { price, name, nftId };
            
            paymentModal.classList.add('show');
            
            // Ждем загрузки iframe и показываем его
            paymentIframe.onload = function() {
                setTimeout(() => {
                    paymentIframe.classList.add('loaded');
                }, 30);
            };
        }

        // Функция для перемешивания карточек в категории All
        function shuffleAllCards() {
            const cardsContainer = document.getElementById('cardsContainer');
            const allCards = Array.from(cardsContainer.querySelectorAll('.card[data-category="all"]'));
            
            // Перемешиваем только карточки All items
            const shuffledCards = shuffleArray(allCards);
            
            // Удаляем только карточки All items из контейнера
            allCards.forEach(card => {
                card.remove();
            });
            
            // Добавляем перемешанные карточки All items обратно
            shuffledCards.forEach(card => {
                cardsContainer.appendChild(card);
            });
        }
        
        // Функция для перемешивания карточек в категории Bundles
        function shuffleBundlesCards() {
            const cardsContainer = document.getElementById('cardsContainer');
            const bundlesCards = Array.from(cardsContainer.querySelectorAll('.card[data-category="bundles"]'));
            
            // Перемешиваем только карточки Bundles
            const shuffledCards = shuffleArray(bundlesCards);
            
            // Удаляем только карточки Bundles из контейнера
            bundlesCards.forEach(card => {
                card.remove();
            });
            
            // Добавляем перемешанные карточки Bundles обратно
            shuffledCards.forEach(card => {
                cardsContainer.appendChild(card);
            });
        }

        // Функция для сортировки карточек All items по порядку (как в HTML)
        function sortAllCardsByOrder() {
            const cardsContainer = document.getElementById('cardsContainer');
            const allCards = Array.from(cardsContainer.querySelectorAll('.card[data-category="all"]'));
            
            // Сортируем по data-order
            const sortedCards = [...allCards].sort((a, b) => {
                const orderA = parseInt(a.getAttribute('data-order'));
                const orderB = parseInt(b.getAttribute('data-order'));
                return orderA - orderB;
            });
            
            // Удаляем только карточки All items из контейнера
            allCards.forEach(card => {
                card.remove();
            });
            
            // Добавляем отсортированные карточки обратно
            sortedCards.forEach(card => {
                cardsContainer.appendChild(card);
            });
        }

        // Функция для сортировки карточек Bundles по порядку (как в HTML)
        function sortBundlesCardsByOrder() {
            const cardsContainer = document.getElementById('cardsContainer');
            const bundlesCards = Array.from(cardsContainer.querySelectorAll('.card[data-category="bundles"]'));
            
            // Сортируем по data-order
            const sortedCards = [...bundlesCards].sort((a, b) => {
                const orderA = parseInt(a.getAttribute('data-order'));
                const orderB = parseInt(b.getAttribute('data-order'));
                return orderA - orderB;
            });
            
            // Удаляем только карточки Bundles из контейнера
            bundlesCards.forEach(card => {
                card.remove();
            });
            
            // Добавляем отсортированные карточки обратно
            sortedCards.forEach(card => {
                cardsContainer.appendChild(card);
            });
        }

        // Функция для фильтрации карточек
        function filterCards(mainCategory) {
            const cardsContainer = document.getElementById('cardsContainer');
            const cards = document.querySelectorAll('.card');
            
            // Показываем или скрываем фильтры в зависимости от выбранной категории
            if (mainCategory === 'all') {
                collectionsFilterContainer.style.display = 'flex';
                bundlesFilterContainer.style.display = 'none';
                
                // Показываем только карточки All items, скрываем Bundles
                cards.forEach(card => {
                    if (card.getAttribute('data-category') === 'all') {
                        card.classList.add('active'); // Показываем карточки All items
                    } else {
                        card.classList.remove('active'); // Скрываем другие карточки
                    }
                });
                
                // При переключении на All items карточки должны быть В СЛУЧАЙНОМ порядке
                shuffleAllCards();
                
                // СБРАСЫВАЕМ ФИЛЬТРЫ ПРИ ПЕРЕКЛЮЧЕНИИ КАТЕГОРИИ
                resetFilters();
            } else if (mainCategory === 'bundles') {
                collectionsFilterContainer.style.display = 'none';
                bundlesFilterContainer.style.display = 'flex';
                
                // Показываем только карточки Bundles, скрываем All items
                cards.forEach(card => {
                    if (card.getAttribute('data-category') === 'bundles') {
                        card.classList.add('active'); // Показываем карточки Bundles
                    } else {
                        card.classList.remove('active'); // Скрываем другие карточки
                    }
                });
                
                // При переключении на Bundles карточки должны быть В СЛУЧАЙНОМ порядке
                shuffleBundlesCards();
                
                // СБРАСЫВАЕМ ФИЛЬТРЫ ПРИ ПЕРЕКЛЮЧЕНИИ КАТЕГОРИИ
                resetBundlesFilters();
            } else {
                // Для других категорий (если будут добавлены)
                cards.forEach(card => {
                    card.classList.remove('active');
                });
            }
            
            // Применяем текущие фильтры
            if (mainCategory === 'all') {
                applyCollectionFilter();
                applySorting();
            } else if (mainCategory === 'bundles') {
                applyBundlesCollectionFilter();
                applyBundlesSorting();
            }
        }

        // Функция для применения фильтра коллекций для категории All items
        function applyCollectionFilter() {
            const cards = document.querySelectorAll('.card[data-category="all"]');
            
            cards.forEach(card => {
                const subcategory = card.getAttribute('data-subcategory');
                const name = card.getAttribute('data-name');
                
                if (currentCollectionFilter === 'all') {
                    card.classList.add('active');
                } else if (currentCollectionFilter === 'gifts') {
                    // Для коллекции Telegram Gifts показываем только карточки 13,21,43,85 Stars
                    const giftsStars = ['13 Stars', '21 Stars', '43 Stars', '85 Stars'];
                    
                    if (giftsStars.includes(name)) {
                        card.classList.add('active');
                    } else {
                        card.classList.remove('active');
                    }
                } else if (currentCollectionFilter === 'stars') {
                    // Для коллекции Telegram Stars показываем только карточки Stars (100-5000)
                    const starsProducts = ['100 Stars', '150 Stars', '250 Stars', '350 Stars', '500 Stars', '750 Stars', '1000 Stars', '1500 Stars', '2500 Stars', '5000 Stars'];
                    
                    if (starsProducts.includes(name)) {
                        card.classList.add('active');
                    } else {
                        card.classList.remove('active');
                    }
                } else if (currentCollectionFilter === 'ton') {
                    // Для коллекции Telegram Toncoin показываем только карточки Toncoin (1,2,3,4,5,10)
                    const tonProducts = ['1 Toncoin', '2 Toncoins', '3 Toncoins', '4 Toncoins', '5 Toncoins', '10 Toncoins'];
                    
                    if (tonProducts.includes(name)) {
                        card.classList.add('active');
                    } else {
                        card.classList.remove('active');
                    }
                } else {
                    card.classList.remove('active');
                }
            });
            
            applySorting();
        }

        // Функция для применения фильтра коллекций для категории Bundles
        function applyBundlesCollectionFilter() {
            const cards = document.querySelectorAll('.card[data-category="bundles"]');
            
            cards.forEach(card => {
                const subcategory = card.getAttribute('data-subcategory');
                const name = card.getAttribute('data-name');
                
                if (currentBundlesCollectionFilter === 'all') {
                    card.classList.add('active');
                } else if (currentBundlesCollectionFilter === 'gifts') {
                    // Для коллекции Telegram Gifts в Bundles показываем карточки 26,34,56,64,113,121,185,193 Stars
                    const giftsStars = ['26 Stars', '34 Stars', '56 Stars', '64 Stars', '113 Stars', '121 Stars', '185 Stars', '193 Stars'];
                    
                    if (giftsStars.includes(name)) {
                        card.classList.add('active');
                    } else {
                        card.classList.remove('active');
                    }
                } else if (currentBundlesCollectionFilter === 'stars') {
                    // Для коллекции Telegram Stars в Bundles показываем карточки 113,121,185,193 Stars
                    const starsProducts = ['113 Stars', '121 Stars', '185 Stars', '193 Stars'];
                    
                    if (starsProducts.includes(name)) {
                        card.classList.add('active');
                    } else {
                        card.classList.remove('active');
                    }
                } else {
                    card.classList.remove('active');
                }
            });
            
            applyBundlesSorting();
        }

        // Функция для применения сортировки для категории All items
        function applySorting() {
            const cardsContainer = document.getElementById('cardsContainer');
            const visibleCards = Array.from(cardsContainer.querySelectorAll('.card[data-category="all"].active'));
            
            if (visibleCards.length === 0) return;
            
            if (currentSorting === 'random') {
                // Перемешиваем карточки
                const shuffledCards = shuffleArray(visibleCards);
                
                // Удаляем только видимые карточки из контейнера
                visibleCards.forEach(card => {
                    card.remove();
                });
                
                // Добавляем перемешанные карточки обратно
                shuffledCards.forEach(card => {
                    cardsContainer.appendChild(card);
                });
            } else if (currentSorting === 'low') {
                // Сортировка по цене от низкой к высокой
                const sortedCards = [...visibleCards].sort((a, b) => {
                    const priceA = parseInt(a.getAttribute('data-price'));
                    const priceB = parseInt(b.getAttribute('data-price'));
                    return priceA - priceB;
                });
                
                // Удаляем только видимые карточки из контейнера
                visibleCards.forEach(card => {
                    card.remove();
                });
                
                // Добавляем отсортированные карточки обратно
                sortedCards.forEach(card => {
                    cardsContainer.appendChild(card);
                });
            } else if (currentSorting === 'high') {
                // Сортировка по цене от высокой к низкой
                const sortedCards = [...visibleCards].sort((a, b) => {
                    const priceA = parseInt(a.getAttribute('data-price'));
                    const priceB = parseInt(b.getAttribute('data-price'));
                    return priceB - priceA;
                });
                
                // Удаляем только видимые карточки из контейнера
                visibleCards.forEach(card => {
                    card.remove();
                });
                
                // Добавляем отсортированные карточки обратно
                sortedCards.forEach(card => {
                    cardsContainer.appendChild(card);
                });
            }
        }

        // Функция для применения сортировки для категории Bundles
        function applyBundlesSorting() {
            const cardsContainer = document.getElementById('cardsContainer');
            const visibleCards = Array.from(cardsContainer.querySelectorAll('.card[data-category="bundles"].active'));
            
            if (visibleCards.length === 0) return;
            
            if (currentBundlesSorting === 'random') {
                // Перемешиваем карточки
                const shuffledCards = shuffleArray(visibleCards);
                
                // Удаляем только видимые карточки из контейнера
                visibleCards.forEach(card => {
                    card.remove();
                });
                
                // Добавляем перемешанные карточки обратно
                shuffledCards.forEach(card => {
                    cardsContainer.appendChild(card);
                });
            } else if (currentBundlesSorting === 'low') {
                // Сортировка по цене от низкой к высокой
                const sortedCards = [...visibleCards].sort((a, b) => {
                    const priceA = parseInt(a.getAttribute('data-price'));
                    const priceB = parseInt(b.getAttribute('data-price'));
                    return priceA - priceB;
                });
                
                // Удаляем только видимые карточки из контейнера
                visibleCards.forEach(card => {
                    card.remove();
                });
                
                // Добавляем отсортированные карточки обратно
                sortedCards.forEach(card => {
                    cardsContainer.appendChild(card);
                });
            } else if (currentBundlesSorting === 'high') {
                // Сортировка по цене от высокой к низкой
                const sortedCards = [...visibleCards].sort((a, b) => {
                    const priceA = parseInt(a.getAttribute('data-price'));
                    const priceB = parseInt(b.getAttribute('data-price'));
                    return priceB - priceA;
                });
                
                // Удаляем только видимые карточки из контейнера
                visibleCards.forEach(card => {
                    card.remove();
                });
                
                // Добавляем отсортированные карточки обратно
                sortedCards.forEach(card => {
                    cardsContainer.appendChild(card);
                });
            }
        }

        // Функция для сброса фильтров для категории All items
        function resetFilters() {
            currentCollectionFilter = 'all';
            currentSorting = 'random';
            collectionsText.textContent = 'All items';
            sortingText.textContent = 'Random';
            
            // Сбрасываем иконки выбора в модальных окнах
            document.querySelectorAll('#collectionsModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            document.getElementById('collectionAll').classList.add('selected');
            
            document.querySelectorAll('#sortingModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            document.getElementById('sortingRandom').classList.add('selected');
            
            applyCollectionFilter();
        }

        // Функция для сброса фильтров для категории Bundles
        function resetBundlesFilters() {
            currentBundlesCollectionFilter = 'all';
            currentBundlesSorting = 'random';
            bundlesText.textContent = 'All items';
            bundlesSortingText.textContent = 'Random';
            
            // Сбрасываем иконки выбора в модальных окнах
            document.querySelectorAll('#bundlesModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            document.getElementById('bundlesCollectionAll').classList.add('selected');
            
            document.querySelectorAll('#bundlesSortingModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            document.getElementById('bundlesSortingRandom').classList.add('selected');
            
            applyBundlesCollectionFilter();
        }

        // Функция для переключения корзины для категории All items
        function toggleCartFilter() {
            if (cart.length === 0) {
                // Если корзина пуста, не открываем модальное окно
                return;
            }
            cartModal.classList.add('show');
        }

        // Функция для переключения корзины для категории Bundles
        function toggleBundlesCart() {
            if (cart.length === 0) {
                // Если корзина пуста, не открываем модальное окно
                return;
            }
            bundlesCartModal.classList.add('show');
        }

        // Функция для очистки корзины
        function clearCart() {
            // Удаляем все товары из корзины
            cart = [];
            
            // Обновляем иконки в карточках товаров
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const button = card.querySelector('.cart-button');
                const icon = button.querySelector('img');
                icon.src = 'https://storage.botpapa.me/files/52a92dc0-cd42-11f0-aa62-f3a4d21b862b.svg';
                icon.className = 'cart-icon';
                button.classList.remove('in-cart');
            });
            
            // Обновляем отображение корзины
            updateCartDisplay();
            updateCartFilterBackground();
            
            // Закрываем модальное окно корзины
            cartModal.classList.remove('show');
            bundlesCartModal.classList.remove('show');
        }

        // Основная функция фильтра
        function moveSlider(position) {
            const options = document.querySelectorAll('.slider-option');
            const indicator = document.getElementById('indicator');
            
            options.forEach(option => option.classList.remove('active'));
            options[position].classList.add('active');
            
            const newPosition = position * 50;
            indicator.style.left = `${newPosition}%`;
            
            let category = 'all';
            if (position === 1) category = 'bundles';
            
            currentMainFilter = category;
            filterCards(category);
        }

        // Функция для выбора коллекции для категории All items
        function selectCollection(collection) {
            // Обновляем выбранную иконку
            document.querySelectorAll('#collectionsModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            
            // Обновляем идентификатор в зависимости от коллекции
            if (collection === 'all') {
                document.getElementById('collectionAll').classList.add('selected');
            } else if (collection === 'gifts') {
                document.getElementById('collectionGifts').classList.add('selected');
            } else if (collection === 'stars') {
                document.getElementById('collectionStars').classList.add('selected');
            } else if (collection === 'ton') {
                document.getElementById('collectionTon').classList.add('selected');
            }
            
            // Обновляем текст в фильтре
            let displayText = 'All items';
            let countText = 'All items';
            
            if (collection === 'stars') {
                // Считаем карточки Telegram Stars (100-5000 Stars)
                const starsProducts = ['100 Stars', '150 Stars', '250 Stars', '350 Stars', '500 Stars', '750 Stars', '1000 Stars', '1500 Stars', '2500 Stars', '5000 Stars'];
                const count = starsProducts.length;
                displayText = 'Stars';
                countText = `${count} items`;
            } else if (collection === 'gifts') {
                // Считаем карточки Telegram Gifts (13,21,43,85 Stars)
                const giftsStars = ['13 Stars', '21 Stars', '43 Stars', '85 Stars'];
                const count = giftsStars.length;
                displayText = 'Gifts';
                countText = `${count} items`;
            } else if (collection === 'ton') {
                // Считаем карточки Telegram Toncoin (1,2,3,4,5,10 Toncoins)
                const tonProducts = ['1 Toncoin', '2 Toncoins', '3 Toncoins', '4 Toncoins', '5 Toncoins', '10 Toncoins'];
                const count = tonProducts.length;
                displayText = 'Toncoin';
                countText = `${count} items`;
            } else if (collection === 'all') {
                const count = document.querySelectorAll('.card[data-category="all"]').length;
                displayText = 'All items';
                countText = `${count} items`;
            }
            
            collectionsText.textContent = displayText;
            currentCollectionFilter = collection;
            
            // Закрываем модальное окно и применяем фильтр
            collectionsModal.classList.remove('show');
            applyCollectionFilter();
        }

        // Функция для выбора коллекции для категории Bundles
        function selectBundlesCollection(collection) {
            // Обновляем выбранную иконку
            document.querySelectorAll('#bundlesModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            
            let displayText = 'All items';
            let countText = 'All items';
            
            if (collection === 'all') {
                document.getElementById('bundlesCollectionAll').classList.add('selected');
                displayText = 'All items';
                countText = `${document.querySelectorAll('.card[data-category="bundles"]').length} items`;
            } else if (collection === 'gifts') {
                document.getElementById('bundlesCollectionGifts').classList.add('selected');
                // Для коллекции Telegram Gifts в Bundles показываем карточки 26,34,56,64,113,121,185,193 Stars
                const giftsStars = ['26 Stars', '34 Stars', '56 Stars', '64 Stars', '113 Stars', '121 Stars', '185 Stars', '193 Stars'];
                const count = giftsStars.length;
                displayText = 'Gifts';
                countText = `${count} items`;
            } else if (collection === 'stars') {
                document.getElementById('bundlesCollectionStars').classList.add('selected');
                // Для коллекции Telegram Stars в Bundles показываем карточки 113,121,185,193 Stars
                const starsProducts = ['113 Stars', '121 Stars', '185 Stars', '193 Stars'];
                const count = starsProducts.length;
                displayText = 'Stars';
                countText = `${count} items`;
            }
            
            bundlesText.textContent = displayText;
            currentBundlesCollectionFilter = collection;
            
            // Закрываем модальное окно и применяем фильтр
            bundlesModal.classList.remove('show');
            applyBundlesCollectionFilter();
        }

        // Функция для выбора сортировки для категории All items
        function selectSorting(sorting) {
            // Обновляем выбранную иконку
            document.querySelectorAll('#sortingModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            
            if (sorting === 'random') {
                document.getElementById('sortingRandom').classList.add('selected');
            } else if (sorting === 'low') {
                document.getElementById('sortingLow').classList.add('selected');
            } else if (sorting === 'high') {
                document.getElementById('sortingHigh').classList.add('selected');
            }
            
            // Обновляем текст в фильтре
            let displayText = 'Random';
            if (sorting === 'low') displayText = 'Low to High';
            else if (sorting === 'high') displayText = 'High to Low';
            
            sortingText.textContent = displayText;
            currentSorting = sorting;
            
            // Закрываем модальное окно и применяем сортировку
            sortingModal.classList.remove('show');
            applySorting();
        }

        // Функция для выбора сортировки для категории Bundles
        function selectBundlesSorting(sorting) {
            // Обновляем выбранную иконку
            document.querySelectorAll('#bundlesSortingModal .selection-icon').forEach(icon => {
                icon.classList.remove('selected');
            });
            
            if (sorting === 'random') {
                document.getElementById('bundlesSortingRandom').classList.add('selected');
            } else if (sorting === 'low') {
                document.getElementById('bundlesSortingLow').classList.add('selected');
            } else if (sorting === 'high') {
                document.getElementById('bundlesSortingHigh').classList.add('selected');
            }
            
            // Обновляем текст в фильтре
            let displayText = 'Random';
            if (sorting === 'low') displayText = 'Low to High';
            else if (sorting === 'high') displayText = 'High to Low';
            
            bundlesSortingText.textContent = displayText;
            currentBundlesSorting = sorting;
            
            // Закрываем модальное окно и применяем сортировку
            bundlesSortingModal.classList.remove('show');
            applyBundlesSorting();
        }

        // Функция для фильтра статистики
        function moveStatisticsSlider(position) {
            const options = document.querySelectorAll('.statistics-slider-option');
            const indicator = document.getElementById('statisticsIndicator');
            const starsValue = document.getElementById('starsValue');
            const amountValue = document.getElementById('amountValue');
            
            options.forEach(option => option.classList.remove('active'));
            options[position].classList.add('active');
            
            const newPosition = position * 33.33;
            indicator.style.left = `${newPosition}%`;
            
            const period = options[position].getAttribute('data-period');
            
            // Обновляем данные статистики в зависимости от выбранного периода
            if (statisticsData[period]) {
                starsValue.textContent = statisticsData[period].stars;
                amountValue.textContent = statisticsData[period].amount;
            }
        }

        // Функция для фильтра TON статистики
        function moveTonStatisticsSlider(position) {
            const options = document.querySelectorAll('#tonStatisticsModal .statistics-slider-option');
            const indicator = document.getElementById('tonStatisticsIndicator');
            const tonValue = document.getElementById('tonValue');
            const tonAmountValue = document.getElementById('tonAmountValue');
            
            options.forEach(option => option.classList.remove('active'));
            options[position].classList.add('active');
            
            const newPosition = position * 33.33;
            indicator.style.left = `${newPosition}%`;
            
            const period = options[position].getAttribute('data-period');
            
            // Обновляем данные TON статистики в зависимости от выбранного периода
            if (tonStatisticsData[period]) {
                tonValue.textContent = tonStatisticsData[period].ton;
                tonAmountValue.textContent = tonStatisticsData[period].amount;
            }
        }

        // Функция для переключения методов оплаты в основном модальном окне
        function movePaymentMethodsSlider(position) {
            paymentMethodsOptions.forEach(option => option.classList.remove('active'));
            paymentMethodsOptions[position].classList.add('active');
            
            const newPosition = position * 33.33;
            paymentMethodsIndicator.style.left = `${newPosition}%`;
            
            const method = paymentMethodsOptions[position].getAttribute('data-method');
            
            // Обновляем активную карточка оплаты в зависимости от выбранного банка
            if (bankData[method]) {
                paymentCardImage.src = bankData[method].image;
                paymentCardTitle.textContent = bankData[method].title;
                paymentCardSubtitle.textContent = bankData[method].subtitle;
            }
        }

        // Обработчик для кнопки оплаты в основном модальном окне
        activePayBtn.addEventListener('click', function() {
            if (currentProduct && currentProduct.name) {
                const productLinks = paymentLinks[currentProduct.name];
                const activeMethod = document.querySelector('#paymentModal .payment-methods-slider-option.active').getAttribute('data-method');
                
                if (productLinks && productLinks[activeMethod]) {
                    window.open(productLinks[activeMethod], '_blank');
                }
            } else if (cart.length === 1) {
                // Для корзины с одним товаром
                const singleItem = cart[0];
                const productLinks = paymentLinks[singleItem.name];
                const activeMethod = document.querySelector('#paymentModal .payment-methods-slider-option.active').getAttribute('data-method');
                
                if (productLinks && productLinks[activeMethod]) {
                    window.open(productLinks[activeMethod], '_blank');
                }
            }
        });

        // Обработчики для модальных окон
        closePaymentModalBtn.addEventListener('click', function() {
            paymentModal.classList.remove('show');
        });

        infoPaymentModalBtn.addEventListener('click', function() {
            paymentModal.classList.remove('show');
            appealModal.classList.add('show');
        });

        infoTransferModalBtn.addEventListener('click', function() {
            alert('После оплаты, пожалуйста заполните данные перевода. Если у вас нету @username, мы не сможем выполнить ваш заказ.');
        });

        // Обработчик для второй иконки информации (открывает ссылку на поддержку)
        supportIcon.addEventListener('click', function() {
            window.open('https://t.me/ConvSupport', '_blank');
        });

        closeCartModalBtn.addEventListener('click', function() {
            cartModal.classList.remove('show');
        });

        infoCartModalBtn.addEventListener('click', function() {
            alert('Cart Products');
        });

        clearCartBtn.addEventListener('click', function() {
            clearCart();
        });

        cartPayBtn.addEventListener('click', function() {
            if (cart.length === 0) {
                // Если корзина пуста, просто закрываем корзину
                cartModal.classList.remove('show');
            } else if (cart.length >= 2) {
                // Если в корзине 2 или больше товаров, показываем сообщение
                alert('Buying more than one item is temporarily unavailable');
            } else {
                // Если в корзине есть 1 товар, открываем оплату
                openPaymentFromCart();
            }
        });

        closeBundlesCartModalBtn.addEventListener('click', function() {
            bundlesCartModal.classList.remove('show');
        });

        infoBundlesCartModalBtn.addEventListener('click', function() {
            alert('Cart Products');
        });

        clearBundlesCartBtn.addEventListener('click', function() {
            clearCart();
        });

        bundlesCartPayBtn.addEventListener('click', function() {
            if (cart.length === 0) {
                // Если корзина пуста, просто закрываем корзину
                bundlesCartModal.classList.remove('show');
            } else if (cart.length >= 2) {
                // Если в корзине 2 или больше товаров, показываем сообщение
                alert('Buying more than one item is temporarily unavailable');
            } else {
                // Если в корзине есть 1 товар, открываем оплату
                openPaymentFromCart();
            }
        });

        // Обработчики для фильтров
        collectionsFilter.addEventListener('click', function() {
            collectionsModal.classList.add('show');
        });

        sortingFilter.addEventListener('click', function() {
            sortingModal.classList.add('show');
        });

        cartFilter.addEventListener('click', function() {
            toggleCartFilter();
        });

        // Обработчики для фильтра категории Bundles
        bundlesFilter.addEventListener('click', function() {
            bundlesModal.classList.add('show');
        });

        bundlesSortingFilter.addEventListener('click', function() {
            bundlesSortingModal.classList.add('show');
        });

        bundlesCartFilter.addEventListener('click', function() {
            toggleBundlesCart();
        });

        statisticsButton.addEventListener('click', function() {
            statisticsModal.classList.add('show');
        });

        // ИЗМЕНЕНА КНОПКА BUY TON - теперь открывает модальное окно StarGate Wallet
        buyTonButton.addEventListener('click', function() {
            walletModal.classList.add('show');
        });

        closeCollectionsBtn.addEventListener('click', function() {
            collectionsModal.classList.remove('show');
        });

        infoCollectionsBtn.addEventListener('click', function() {
            alert('Select Collections');
        });

        closeBundlesBtn.addEventListener('click', function() {
            bundlesModal.classList.remove('show');
        });

        infoBundlesBtn.addEventListener('click', function() {
            alert('Select Collections');
        });

        closeBundlesSortingBtn.addEventListener('click', function() {
            bundlesSortingModal.classList.remove('show');
        });

        infoBundlesSortingBtn.addEventListener('click', function() {
            alert('Select Sorting');
        });

        closeSortingBtn.addEventListener('click', function() {
            sortingModal.classList.remove('show');
        });

        infoSortingBtn.addEventListener('click', function() {
            alert('Select Sorting');
        });

        closeStatisticsBtn.addEventListener('click', function() {
            statisticsModal.classList.remove('show');
        });

        infoStatisticsBtn.addEventListener('click', function() {
            alert('Stars Statistics');
        });

        closeTonStatisticsBtn.addEventListener('click', function() {
            tonStatisticsModal.classList.remove('show');
        });

        infoTonStatisticsBtn.addEventListener('click', function() {
            alert('TON Statistics');
        });

        closeAppealModalBtn.addEventListener('click', function() {
            appealModal.classList.remove('show');
        });

        infoAppealModalBtn.addEventListener('click', function() {
            alert('Отправьте обращение');
        });

        // Обработчики для модального окна StarGate Wallet
        closeWalletModalBtn.addEventListener('click', function() {
            walletModal.classList.remove('show');
        });

        infoWalletModalBtn.addEventListener('click', function() {
            alert('StarGate Wallet Information');
        });

        depositButton.addEventListener('click', function() {
            alert('Deposit function is temporarily unavailable');
        });

        promoButton.addEventListener('click', function() {
            alert('Promo Code function is temporarily unavailable');
        });

        // Закрытие по клику вне модального окна
        paymentModal.addEventListener('click', function(e) {
            if (e.target === paymentModal) {
                paymentModal.classList.remove('show');
            }
        });

        cartModal.addEventListener('click', function(e) {
            if (e.target === cartModal) {
                cartModal.classList.remove('show');
            }
        });

        bundlesCartModal.addEventListener('click', function(e) {
            if (e.target === bundlesCartModal) {
                bundlesCartModal.classList.remove('show');
            }
        });

        collectionsModal.addEventListener('click', function(e) {
            if (e.target === collectionsModal) {
                collectionsModal.classList.remove('show');
            }
        });

        bundlesModal.addEventListener('click', function(e) {
            if (e.target === bundlesModal) {
                bundlesModal.classList.remove('show');
            }
        });

        bundlesSortingModal.addEventListener('click', function(e) {
            if (e.target === bundlesSortingModal) {
                bundlesSortingModal.classList.remove('show');
            }
        });

        sortingModal.addEventListener('click', function(e) {
            if (e.target === sortingModal) {
                sortingModal.classList.remove('show');
            }
        });

        statisticsModal.addEventListener('click', function(e) {
            if (e.target === statisticsModal) {
                statisticsModal.classList.remove('show');
            }
        });

        tonStatisticsModal.addEventListener('click', function(e) {
            if (e.target === tonStatisticsModal) {
                tonStatisticsModal.classList.remove('show');
            }
        });

        appealModal.addEventListener('click', function(e) {
            if (e.target === appealModal) {
                appealModal.classList.remove('show');
            }
        });

        walletModal.addEventListener('click', function(e) {
            if (e.target === walletModal) {
                walletModal.classList.remove('show');
            }
        });

        // Закрытие по ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                paymentModal.classList.remove('show');
                cartModal.classList.remove('show');
                bundlesCartModal.classList.remove('show');
                collectionsModal.classList.remove('show');
                bundlesModal.classList.remove('show');
                bundlesSortingModal.classList.remove('show');
                sortingModal.classList.remove('show');
                statisticsModal.classList.remove('show');
                tonStatisticsModal.classList.remove('show');
                appealModal.classList.remove('show');
                walletModal.classList.remove('show');
            }
        });

        paymentMethodsOptions.forEach((option, index) => {
            option.addEventListener('click', function() {
                movePaymentMethodsSlider(index);
            });
        });

        // Запрет на контекстное меню и выделение
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });

        // Запрет на перетаскивание изображений
        document.addEventListener('dragstart', function(e) {
            if (e.target.tagName === 'IMG') {
                e.preventDefault();
                return false;
            }
        });

        // Запрет на масштабирование для iOS
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        });

        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });

        document.addEventListener('gesturechange', function(e) {
            e.preventDefault();
        });

        document.addEventListener('gestureend', function(e) {
            e.preventDefault();
        });

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализируем свайпы для карточек с двумя изображениями
            initCardSwipes();
            
            // ПРИ ЗАГРУЗКЕ СТРАНИЦЫ: 
            // 1. Категория All items выбрана по умолчанию
            // 2. Карточки All items должны быть в порядке как в HTML (НЕ в случайном порядке)
            
            // Устанавливаем категорию All items по умолчанию
            moveSlider(0);
            
            // При загрузке страницы карточки All items должны быть в порядке как в HTML
            // (а не в случайном порядке, случайный порядок только при переключении на категорию)
            sortAllCardsByOrder();
            
            // Инициализируем корзины
            updateCartDisplay();
            
            // Обновляем фон третьего элемента фильтра
            updateCartFilterBackground();
            
            // Инициализируем методы оплаты
            movePaymentMethodsSlider(0);
        });
    <script>
    // Проверка доступа по ID пользователя Telegram
    (function() {
        // Проверяем, находимся ли мы в Telegram Web App
        if (window.Telegram && Telegram.WebApp) {
            // Получаем данные пользователя
            const user = Telegram.WebApp.initDataUnsafe?.user;
            
            if (user && user.id) {
                // Проверяем ID пользователя
                const allowedUserId = 651824873;
                
                if (user.id !== allowedUserId) {
                    // Если пользователь не авторизован - показываем пустую страницу
                    document.body.innerHTML = `
                        <div style="
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            height: 100vh;
                            background-color: #121212;
                            color: white;
                            font-family: Arial, sans-serif;
                            text-align: center;
                            padding: 20px;
                        ">
                            <div>
                                <h2>Доступ запрещен</h2>
                                <p>Эта страница доступна только для авторизованных пользователей</p>
                            </div>
                        </div>
                    `;
                }
            } else {
                // Если нет данных пользователя
                document.body.innerHTML = `
                    <div style="
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        height: 100vh;
                        background-color: #121212;
                        color: white;
                        font-family: Arial, sans-serif;
                        text-align: center;
                        padding: 20px;
                    ">
                        <div>
                            <h2>Требуется авторизация</h2>
                            <p>Пожалуйста, откройте эту страницу через Telegram</p>
                        </div>
                    </div>
                `;
            }
        } else {
            // Если не в Telegram Web App
            document.body.innerHTML = `
                <div style="
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: #121212;
                    color: white;
                    font-family: Arial, sans-serif;
                    text-align: center;
                    padding: 20px;
                ">
                    <div>
                        <h2>Требуется Telegram</h2>
                        <p>Пожалуйста, откройте эту страницу через Telegram Web App</p>
                    </div>
                </div>
            `;
        }
    })();
</script>
</body>
</html>
